{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function createHttpRequest(options) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', options);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport default function addImagesToHtml(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const imagesHtml = images\n    .map(image => {\n      return `<li class=\"item-ul\">\n  <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" /></a>\n  <div class=\"about-img-div\">\n    <p class=\"description-img\">Likes</p>\n    <p class=\"description-img\">Views</p>\n    <p class=\"description-img\">Comments</p>\n    <p class=\"description-img\">Downloads</p>\n    <span class=\"description-value\">${image.likes}</span>\n    <span class=\"description-value\">${image.views}</span>\n    <span class=\"description-value\">${image.comments}</span>\n    <span class=\"description-value\">${image.downloads}</span>\n  </div>\n</li>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imagesHtml);\n\n  const lightBox = new SimpleLightbox('.gallery li a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n\n  lightBox.refresh();\n}\n","import createHttpRequest from './js/pixabay-api';\nimport addImagesToHtml from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nconst KEY = '45056360-0d73312e4ecad0bc63c18ca30';\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet totalPagesToLoad = 0;\n\nform.addEventListener('submit', searchImagesFu);\nloadMoreButton.addEventListener('click', loadMoreImages);\n\nasync function searchImagesFu(event) {\n  event.preventDefault();\n\n  searchQuery = form.elements[0].value.trim();\n  currentPage = 1;\n  gallery.innerHTML = '';\n\n  if (searchQuery === '' || searchQuery.length < 2) {\n    iziToast.error({\n      title: '',\n      message: 'The input field is empty or has less than two characters!',\n    });\n    loadMoreButton.style.display = 'none';\n    return;\n  }\n\n  loader.style.display = 'block';\n\n  const options = {\n    params: {\n      key: KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const data = await createHttpRequest(options);\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: '',\n        message: 'No pictures found! Try again!',\n      });\n      loadMoreButton.style.display = 'none';\n    } else {\n      addImagesToHtml(data.hits);\n      loadMoreButton.style.display = 'block';\n      totalHits = data.totalHits;\n      totalPagesToLoad = totalHits / 15;\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: '',\n      message: `Error fetching images: ${error.message || error}`,\n    });\n  } finally {\n    if (totalHits < 15) {\n      loadMoreButton.style.display = 'none';\n    }\n    form.reset();\n  }\n}\n\nasync function loadMoreImages() {\n  loader.style.display = 'block';\n  currentPage += 1;\n\n  const options = {\n    params: {\n      key: KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const data = await createHttpRequest(options);\n    loader.style.display = 'none';\n\n    addImagesToHtml(data.hits);\n\n    const galleryItem = document.querySelector('.gallery li');\n    const galleryItemParams = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: galleryItemParams.height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: '',\n      message: `Error fetching images: ${error.message || error}`,\n    });\n  } finally {\n    if (currentPage >= totalPagesToLoad) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n}\n"],"names":["createHttpRequest","options","axios","error","addImagesToHtml","images","gallery","imagesHtml","image","SimpleLightbox","form","loader","loadMoreButton","KEY","currentPage","searchQuery","totalHits","totalPagesToLoad","searchImagesFu","loadMoreImages","event","iziToast","data","galleryItemParams"],"mappings":"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"}